{% load l10n %}
<div id="resultados" hx-swap-oob="true">
    <table class="table table-hover">
        <thead>
            <tr>
                <th colspan="2" class="text-center table-dark">Resultados de la Evaluación</th>
            </tr>
        </thead>    
        <tbody>
            <tr>
                <th class="table-dark w-50">Eficiencia (%)</th>
                <td class="w-50">{{resultados.eficiencia|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">Calor Carcasa (W)</th>
                <td class="w-50">{{resultados.calor_carcasa|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">Calor Tubo (W)</th>
                <td class="w-50">{{resultados.calor_tubo|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">Coeficiente Global de Transferencia U (W/m²K)</th>
                <td class="w-50">{{resultados.u|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">Delta T Tubos ({{resultados.temperatura_unidad}})</th>
                <td class="w-50">{{resultados.delta_t_tubos|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">Delta T Carcasa ({{resultados.temperatura_unidad}})</th>
                <td class="w-50">{{resultados.delta_t_carcasa|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">MTD ({{resultados.temperatura_unidad}})</th>
                <td class="w-50">{{resultados.mtd|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">Ensuciamiento (m²K/W)</th>
                <td class="w-50">{{resultados.ensuciamiento|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">NTU</th>
                <td class="w-50">{{resultados.ntu|floatformat:4}}</td>
            </tr>
            <tr>
                <th class="table-dark w-50">Cmín (W/K)</th>
                <td class="w-50">{{resultados.cmin|floatformat:4}}</td>
            </tr>
        </tbody>
    </table>

    {% for advertencia in advertencias %}
    <div class="alert alert-warning mb-3" role="alert">
        {{advertencia}}
    </div>
    {% endfor %}
</div>

{% for corriente in resultados.corrientes_carcasa %}
<table>
    <tbody>
        <td id="entalpia-corriente-{{corriente.pk}}" class="change-blank" hx-swap-oob="true">
            {{corriente.h|floatformat:4}}
            <input type="hidden" name="corriente-{{corriente.pk}}-entalpia" value="{{corriente.h|unlocalize}}">
        </td>

        <td class="change-blank" id="densidad-corriente-{{corriente.pk}}" hx-swap-oob="true">
            {{corriente.d|floatformat:4}}
            <input type="hidden" name="corriente-{{corriente.pk}}-densidad" value="{{corriente.d|unlocalize}}">
        </td>

        <td class="change-blank" id="fase-corriente-{{corriente.pk}}" hx-swap-oob="true">
            {{corriente.p}}
            <input type="hidden" name="corriente-{{corriente.pk}}-fase" value="{{corriente.p|unlocalize}}">
        </td>

        <td class="change-blank" id="cp-corriente-{{corriente.pk}}" hx-swap-oob="true">
            {{corriente.c}}
            <input type="hidden" name="corriente-{{corriente.pk}}-cp" value="{{corriente.c|unlocalize}}">
        </td>
    </tbody>
</table>
{% endfor %}

{% for corriente in resultados.corrientes_tubo %}
<table>
    <tbody>
        <td class="change-blank" id="entalpia-corriente-{{corriente.pk}}" hx-swap-oob="true">
            {{corriente.h|floatformat:4}}
            <input type="hidden" name="corriente-{{corriente.pk}}-entalpia" value="{{corriente.h|unlocalize}}">
        </td>

        <td class="change-blank" id="densidad-corriente-{{corriente.pk}}" hx-swap-oob="true">
            {{corriente.d|floatformat:4}}
            <input type="hidden" name="corriente-{{corriente.pk}}-densidad" value="{{corriente.d|unlocalize}}">
        </td>

        <td class="change-blank" id="fase-corriente-{{corriente.pk}}" hx-swap-oob="true">
            {{corriente.p}}
            <input type="hidden" name="corriente-{{corriente.pk}}-fase" value="{{corriente.p|unlocalize}}">
        </td>

        <td class="change-blank" id="cp-corriente-{{corriente.pk}}" hx-swap-oob="true">
            {{corriente.c}}
            <input type="hidden" name="corriente-{{corriente.pk}}-cp" value="{{corriente.c|unlocalize}}">
        </td>
    </tbody>
</table>
{% endfor %}

<input type="hidden" id="tipo_operacion" name="tipo" value="almacenar" hx-swap-oob="true">